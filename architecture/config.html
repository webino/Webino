<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration Architecture &mdash; Webino 0.1.0alpha documentation</title>
    
    <link rel="stylesheet" href="../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.0alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Webino 0.1.0alpha documentation" href="../index.html" />
    <link rel="next" title="Services Architecture" href="services.html" />
    <link rel="prev" title="Application Architecture" href="application.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../_static/common.css" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&subset=latin,latin-ext" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700&subset=latin,latin-ext" type="text/css" />
  </head>
  <body role="document">
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="application.html" title="Previous document">Application Architecture</a>
        </li>
        <li>
          <a href="services.html" title="Next document">Services Architecture</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Webino 0.1.0alpha documentation</a></li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuration-architecture">
<h1>Configuration Architecture<a class="headerlink" href="#configuration-architecture" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#configuration-features" id="id1">Configuration Features</a></li>
<li><a class="reference internal" href="#application-configuration" id="id2">Application Configuration</a></li>
<li><a class="reference internal" href="#services-configuration" id="id3">Services Configuration</a></li>
<li><a class="reference internal" href="#listeners-configuration" id="id4">Listeners Configuration</a></li>
<li><a class="reference internal" href="#core-configuration" id="id5">Core Configuration</a></li>
</ul>
</div>
<p>The configuration is an efficient way how to prepare your application for a dispatch. It may be cached,
and almost everything will be configured in a lazy style, on demand.</p>
<p>Configuration is basically a multidimensional array. Writing arrays in PHP is a little hell, because without
a documentation we don&#8217;t know what to type, so configurators are introduced.</p>
<img alt="../_images/WebinoConfigLib_h400.png" class="centered" src="../_images/WebinoConfigLib_h400.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not forget to enable a configuration cache, it will speed up your application.</p>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoAppLib\Application\CoreConfig</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">WebinoConfigLib\Feature\ConfigCacheEnabled</span><span class="p">;</span>

<span class="k">return</span> <span class="k">new</span> <span class="nx">CoreConfig</span><span class="p">([</span>

    <span class="k">new</span> <span class="nx">ConfigCacheEnabled</span><span class="p">,</span>

<span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="configuration-features">
<h2><a class="toc-backref" href="#id1">Configuration Features</a><a class="headerlink" href="#configuration-features" title="Permalink to this headline">¶</a></h2>
<p>Configurators are used to generate array configurations for large PHP applications. With them, you can generate
array configuration in the OOP way. Everything is config and config can contain features. Feature is a fragment
of a pluggable configuration.</p>
<p>You can create your config features like this:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoConfigLib\Feature\AbstractFeature</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyFeature</span> <span class="k">extends</span> <span class="nx">AbstractFeature</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$argOne</span><span class="p">,</span> <span class="nv">$argTwo</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mergeArray</span><span class="p">([</span>
            <span class="s1">&#39;some_settings&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
                <span class="s1">&#39;anything&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="nv">$argOne</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="nv">$argTwo</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>then when you create a configuration:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoConfigLib\Config</span><span class="p">;</span>

<span class="nb">var_dump</span><span class="p">((</span><span class="k">new</span> <span class="nx">Config</span><span class="p">([</span>

    <span class="k">new</span> <span class="nx">MyFeature</span><span class="p">(</span><span class="s1">&#39;OPTION_ONE&#39;</span><span class="p">,</span> <span class="s1">&#39;OPTION_TWO&#39;</span><span class="p">),</span>

<span class="p">]))</span><span class="o">-&gt;</span><span class="na">toArray</span><span class="p">());</span>
</pre></div>
</div>
<p>it will produce an array:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="p">[</span>
    <span class="s1">&#39;some_settings&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">&#39;anything&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;OPTION_ONE&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;OPTION_TWO&#39;</span><span class="p">],</span>
    <span class="p">],</span>
<span class="p">];</span>
</pre></div>
</div>
<p>Now you should get the main idea what the configuration feature is.</p>
</div>
<div class="section" id="application-configuration">
<h2><a class="toc-backref" href="#id2">Application Configuration</a><a class="headerlink" href="#application-configuration" title="Permalink to this headline">¶</a></h2>
<p>We can add or remove a feature from the config easily:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoAppLib\Feature\Config</span><span class="p">;</span>

<span class="k">new</span> <span class="nx">Config</span><span class="p">([</span>

    <span class="k">new</span> <span class="nx">ExampleFeatureOne</span><span class="p">,</span>
    <span class="k">new</span> <span class="nx">ExampleFeatureTwo</span><span class="p">(</span><span class="s1">&#39;DEFAULT_OPTION&#39;</span><span class="p">),</span>

<span class="p">]);</span>
</pre></div>
</div>
<p>adding another feature and changing the option:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoAppLib\Feature\Config</span><span class="p">;</span>

<span class="k">new</span> <span class="nx">Config</span><span class="p">([</span>

    <span class="k">new</span> <span class="nx">ExampleFeatureOne</span><span class="p">,</span>
    <span class="k">new</span> <span class="nx">ExampleFeatureTwo</span><span class="p">(</span><span class="s1">&#39;MY_OPTION&#39;</span><span class="p">),</span>
    <span class="k">new</span> <span class="nx">ExampleFeatureThree</span><span class="p">,</span>

<span class="p">]);</span>
</pre></div>
</div>
<p>Calling a method on a configuration feature is easy:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoAppLib\Feature\Config</span><span class="p">;</span>

<span class="k">new</span> <span class="nx">Config</span><span class="p">([</span>

    <span class="p">(</span><span class="k">new</span> <span class="nx">ExampleFeatureFoo</span><span class="p">(</span><span class="s1">&#39;ANY_OPTION&#39;</span><span class="p">))</span>
        <span class="o">-&gt;</span><span class="na">setSomething</span><span class="p">(</span><span class="s1">&#39;anything&#39;</span><span class="p">),</span>

<span class="p">]);</span>
</pre></div>
</div>
<p>So we can produce very complex configuration on a couple of lines.</p>
</div>
<div class="section" id="services-configuration">
<h2><a class="toc-backref" href="#id3">Services Configuration</a><a class="headerlink" href="#services-configuration" title="Permalink to this headline">¶</a></h2>
<p>With services configuration we can register invokables and factories to the application service manager.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoAppLib\Feature\Config</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">WebinoAppLib\Feature\Service</span><span class="p">;</span>

<span class="k">new</span> <span class="nx">Config</span><span class="p">([</span>

    <span class="c1">// registering invokable</span>
    <span class="k">new</span> <span class="nx">Service</span><span class="p">(</span><span class="nx">MyInvokableService</span><span class="o">::</span><span class="na">class</span><span class="p">),</span>

    <span class="c1">// invokable with alias</span>
    <span class="k">new</span> <span class="nx">Service</span><span class="p">([</span><span class="s1">&#39;MyInvokableAlias&#39;</span> <span class="o">=&gt;</span> <span class="nx">MyInvokableService</span><span class="o">::</span><span class="na">class</span><span class="p">]),</span>

    <span class="c1">// registering service factory</span>
    <span class="k">new</span> <span class="nx">Service</span><span class="p">(</span><span class="nx">MyService</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="nx">MyServiceFactory</span><span class="o">::</span><span class="na">class</span><span class="p">),</span>

    <span class="c1">// service with alias using factory</span>
    <span class="k">new</span> <span class="nx">Service</span><span class="p">(</span><span class="s1">&#39;MyServiceAlias&#39;</span><span class="p">,</span> <span class="nx">MyServiceFactory</span><span class="o">::</span><span class="na">class</span><span class="p">),</span>

<span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="listeners-configuration">
<h2><a class="toc-backref" href="#id4">Listeners Configuration</a><a class="headerlink" href="#listeners-configuration" title="Permalink to this headline">¶</a></h2>
<p>We can configure an application listeners bindings.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoAppLib\Feature\Config</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">WebinoAppLib\Feature\Listener</span><span class="p">;</span>

<span class="k">new</span> <span class="nx">Config</span><span class="p">([</span>

    <span class="c1">// registering invokable listener</span>
    <span class="k">new</span> <span class="nx">Listener</span><span class="p">(</span><span class="nx">MyInvokableListener</span><span class="o">::</span><span class="na">class</span><span class="p">),</span>

    <span class="c1">// with alias</span>
    <span class="k">new</span> <span class="nx">Listener</span><span class="p">([</span><span class="s1">&#39;MyListenerAlias&#39;</span> <span class="o">=&gt;</span> <span class="nx">MyInvokableListener</span><span class="o">::</span><span class="na">class</span><span class="p">]),</span>

    <span class="c1">// registering listener using factory</span>
    <span class="k">new</span> <span class="nx">Listener</span><span class="p">(</span><span class="nx">MyListener</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="nx">MyListenerFactory</span><span class="o">::</span><span class="na">class</span><span class="p">),</span>

    <span class="c1">// listener alias using factory</span>
    <span class="k">new</span> <span class="nx">Listener</span><span class="p">([</span><span class="s1">&#39;MyListenerAlias&#39;</span> <span class="o">=&gt;</span> <span class="nx">MyListener</span><span class="o">::</span><span class="na">class</span><span class="p">],</span> <span class="nx">MyListenerFactory</span><span class="o">::</span><span class="na">class</span><span class="p">),</span>

<span class="p">]);</span>
</pre></div>
</div>
</div>
<div class="section" id="core-configuration">
<h2><a class="toc-backref" href="#id5">Core Configuration</a><a class="headerlink" href="#core-configuration" title="Permalink to this headline">¶</a></h2>
<p>Services and listeners that should be available before application is fully configured must be
registered into the core section of a configuration.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoAppLib\Application\CoreConfig</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">WebinoAppLib\Feature\CoreListener</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">WebinoAppLib\Feature\CoreService</span><span class="p">;</span>

<span class="k">new</span> <span class="nx">CoreConfig</span><span class="p">([</span>

    <span class="c1">// registering a core service</span>
    <span class="k">new</span> <span class="nx">CoreService</span><span class="p">(</span><span class="nx">MyInvokableService</span><span class="o">::</span><span class="na">class</span><span class="p">),</span>

    <span class="c1">// registering a core listener</span>
    <span class="k">new</span> <span class="nx">CoreListener</span><span class="p">(</span><span class="nx">MyInvokableListener</span><span class="o">::</span><span class="na">class</span><span class="p">),</span>

<span class="p">]);</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/webino.png" alt="Logo"/>
            </a></p><menu>
    <h2>Getting Started</h2>
    <ul>
        <li>
            <a href="../index.html">Introduction</a>
        </li>
        <li>
            <a href="../demo-application.html">Demo Application [TODO]</a>
        </li>
        <li>
            <a href="../installation.html">Installation [TODO]</a>
        </li>
        <li>
            <a href="../available-modules.html">Available Modules [TODO]</a>
        </li>
    </ul>

    <h2>The Basics</h2>
    <ul>
        <li>
            <a href="../basics/basic-usage.html">Basic Usage</a>
        </li>
        <li>
            <a href="../basics/application-modules.html">Application Modules</a>
        </li>
        <li>
            <a href="../basics/skeleton-application.html">Skeleton Application [TODO]</a>
        </li>
        <li>
            <a href="../basics/request-responding.html">Request Responding [TODO]</a>
        </li>
        <li>
            <a href="../basics/templates.html">Templates [TODO]</a>
        </li>
        <li>
            <a href="../basics/public-assets.html">Public Assets [TODO]</a>
        </li>
        <li>
            <a href="../basics/command-line-interface.html">Command Line Interface</a>
        </li>
    </ul>

    <h2>Architecture</h2>
    <ul>
        <li>
            <a href="application.html">Application</a>
        </li>
        <li>
            <a href="#">Configuration</a>
        </li>
        <li>
            <a href="services.html">Services</a>
        </li>
        <li>
            <a href="events.html">Event System</a>
        </li>
    </ul>

    <h2>User Guide</h2>
    <ul>
        <li>
            <a href="../guide/config.html">Config</a>
        </li>
        <li>
            <a href="../guide/services.html">Services</a>
        </li>
        <li>
            <a href="../guide/events.html">Events</a>
        </li>
        <li>
            <a href="../guide/debugging.html">Debugging</a>
        </li>
        <li>
            <a href="../guide/logging.html">Logging</a>
        </li>
        <li>
            <a href="../guide/caching.html">Caching [TODO]</a>
        </li>
        <li>
            <a href="../guide/filesystem.html">Filesystem</a>
        </li>
        <li>
            <a href="../guide/routing.html">Routing</a>
        </li>
        <li>
            <a href="../guide/requests.html">Requests [TODO]</a>
        </li>
        <li>
            <a href="../guide/responses.html">Responses [TODO]</a>
        </li>
        <li>
            <a href="../guide/sessions.html">Sessions [TODO]</a>
        </li>
        <li>
            <a href="../guide/mail.html">Mail [TODO]</a>
        </li>
        <li>
            <a href="../guide/data.html">Data [TODO]</a>
        </li>
        <li>
            <a href="../guide/templates.html">Templates [TODO]</a>
        </li>
        <li>
            <a href="../guide/assets.html">Assets [TODO]</a>
        </li>
        <li>
            <a href="../guide/localization.html">Localization [TODO]</a>
        </li>
        <li>
            <a href="../guide/console.html">Console</a>
        </li>
    </ul>

    <h2>Delivery</h2>
    <ul>
        <li>
            <a href="../delivery/application-build.html">Application Build [TODO]</a>
        </li>
        <li>
            <a href="../delivery/continuous-integration.html">Continuous Integration [TODO]</a>
        </li>
        <li>
            <a href="../delivery/continuous-delivery.html">Continuous Delivery [TODO]</a>
        </li>
    </ul>

    <h2>Development</h2>
    <ul>
        <li>
            <a href="../development/api-docs.html">API Docs [TODO]</a>
        </li>
        <li>
            <a href="../development/roadmap.html">Roadmap [TODO]</a>
        </li>
        <li>
            <a href="../development/release-notes.html">Release Notes [TODO]</a>
        </li>
        <li>
            <a href="../development/upgrade-guide.html">Upgrade Guide [TODO]</a>
        </li>
        <li>
            <a href="../development/contribution-guide.html">Contribution guide [TODO]</a>
        </li>
    </ul>
</menu>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="application.html" title="Previous document">Application Architecture</a>
        </li>
        <li>
          <a href="services.html" title="Next document">Services Architecture</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Webino 0.1.0alpha documentation</a></li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2015, Webino, s. r. o. All rights reserved.

  </footer>

  
  </body>
</html>