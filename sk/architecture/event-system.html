<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Application Event System &mdash; Webino 0.1.0alpha dokumentácia</title>
    
    <link rel="stylesheet" href="../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.0alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="top" title="Webino 0.1.0alpha dokumentácia" href="../index.html" />
    <link rel="next" title="Application Configuration" href="configuration.html" />
    <link rel="prev" title="Application Services" href="services.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../_static/common.css" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&subset=latin,latin-ext" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700&subset=latin,latin-ext" type="text/css" />
  </head>
  <body role="document">
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="services.html" title="Previous document">Application Services</a>
        </li>
        <li>
          <a href="configuration.html" title="Next document">Application Configuration</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Webino 0.1.0alpha dokumentácia</a></li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="application-event-system">
<h1>Application Event System<a class="headerlink" href="#application-event-system" title="Trvalý odkaz na tento nadpis">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#event-lifecycle" id="id1">Event Lifecycle</a></li>
<li><a class="reference internal" href="#event-listeners" id="id2">Event Listeners</a></li>
</ul>
</div>
<p>The Webino™ architecture is event driven, thus extensible. We can attach listeners to events,
performing other operations as they trigger.</p>
<div class="section" id="event-lifecycle">
<h2><a class="toc-backref" href="#id1">Event Lifecycle</a><a class="headerlink" href="#event-lifecycle" title="Trvalý odkaz na tento nadpis">¶</a></h2>
<p>The basic idea around events is that we just trigger an event and every action happens in listeners,
even the main action. Then we can listen to that event using priorities, if we want to act like a middleware.
The event propagation could be stopped at any time.</p>
<img alt="../_images/WebinoEventLib.Event.Lifecycle_h400.png" class="centered" src="../_images/WebinoEventLib.Event.Lifecycle_h400.png" />
<p>Using events like <em>someEvent.pre</em> and <em>someEvent.post</em> or <em>someEvent.before</em>, <em>someEvent.after</em>, it doesn&#8217;t matter,
is messy and not recommended, don&#8217;t do that. Give an event a unique name then attach listeners using priorities.
Convenient way to do that is to use the event <a class="reference internal" href="../api/events.html#api-events-priority"><span>priority constants</span></a>.</p>
</div>
<div class="section" id="event-listeners">
<h2><a class="toc-backref" href="#id2">Event Listeners</a><a class="headerlink" href="#event-listeners" title="Trvalý odkaz na tento nadpis">¶</a></h2>
<p>The event listener is a callable peiece of code that can perform actions when event is emitted.
It is allowed to register an event listeners in some different ways.</p>
<div class="section" id="closure-listener">
<h3>Closure Listener<a class="headerlink" href="#closure-listener" title="Trvalý odkaz na tento nadpis">¶</a></h3>
<p><em>The closure listener is the fastest created listener, but not a best practice at all.</em></p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoEventLib\Event</span><span class="p">;</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">(</span><span class="s1">&#39;someEvent&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something...</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="invokable-listener">
<h3>Invokable Listener<a class="headerlink" href="#invokable-listener" title="Trvalý odkaz na tento nadpis">¶</a></h3>
<p><em>The invokable listener is a class that its object can be called like a function</em></p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoEventLib\Event</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyInvokableListener</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__invoke</span><span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// do something...</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// lazy loading</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">(</span><span class="s1">&#39;someEvent&#39;</span><span class="p">,</span> <span class="nx">MyInvokableListenner</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

<span class="c1">// as an object</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">(</span><span class="s1">&#39;someEvent&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">MyInvokableListenner</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="listener-aggregate">
<h3>Listener Aggregate<a class="headerlink" href="#listener-aggregate" title="Trvalý odkaz na tento nadpis">¶</a></h3>
<p><em>The listener aggregate is a class that register other listeners in a batch.</em></p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">use</span> <span class="nx">WebinoEventLib\Event</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">WebinoEventLib\Listener\AbstractListener</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MyListenerAggregate</span> <span class="k">extends</span> <span class="nx">AbstractListener</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">init</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// handle an event by itself</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">listen</span><span class="p">(</span><span class="s1">&#39;someEvent&#39;</span><span class="p">,</span> <span class="s1">&#39;onSomeEvent&#39;</span><span class="p">);</span>

        <span class="c1">// handle an event by closure</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">listen</span><span class="p">(</span><span class="s1">&#39;someEvent&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// do something...</span>
        <span class="p">});</span>

        <span class="c1">// handle an event by invokable</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">listen</span><span class="p">(</span><span class="s1">&#39;someEvent&#39;</span><span class="p">,</span> <span class="nx">SomeInvokableListener</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

        <span class="c1">// handle an event by its collaborator</span>
        <span class="nv">$eventProcessor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\MyEventProcessor</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">listen</span><span class="p">(</span><span class="s1">&#39;someEvent&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nv">$eventProcessor</span><span class="p">,</span> <span class="s1">&#39;onEvent&#39;</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">onSomeEvent</span><span class="p">(</span><span class="nx">Event</span> <span class="nv">$event</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// do something...</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// lazy loading</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">(</span><span class="s1">&#39;someEvent&#39;</span><span class="p">,</span> <span class="nx">MyListenerAggregate</span><span class="o">::</span><span class="na">class</span><span class="p">);</span>

<span class="c1">// as an object</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">(</span><span class="s1">&#39;someEvent&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">MyListenerAggregate</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/webino.png" alt="Logo"/>
            </a></p><menu>
    <h2>Getting Started</h2>
    <ul>
        <li>
            <a href="../introduction.html">Introduction</a>
        </li>
        <li>
            <a href="../installation.html">Installation</a>
        </li>
        <li>
            <a href="../basic-usage.html">Basic Usage</a>
        </li>
    </ul>
    <h2>Architecture</h2>
    <ul>
        <li>
            <a href="core.html">Application Core</a>
        </li>
        <li>
            <a href="services.html">Services</a>
        </li>
        <li>
            <a href="#">Event System</a>
        </li>
        <li>
            <a href="configuration.html">Configuration</a>
        </li>
    </ul>
    <h2>API</h2>
    <ul>
        <li>
            <a href="../api/core.html">Core</a>
        </li>
        <li>
            <a href="../api/config.html">Config</a>
        </li>
        <li>
            <a href="../api/services.html">Services</a>
        </li>
        <li>
            <a href="../api/events.html">Events</a>
        </li>
        <li>
            <a href="../api/logging.html">Logging</a>
        </li>
        <li>
            <a href="../api/caching.html">Caching</a>
        </li>
        <li>
            <a href="../api/files.html">Filesystem</a>
        </li>
    </ul>
    <h2>Services</h2>
    <ul>
        <li>
            <a href="../services/config.html">Config</a>
        </li>
        <li>
            <a href="../services/events.html">Events</a>
        </li>
        <li>
            <a href="../services/debugger.html">Debugger</a>
        </li>
        <li>
            <a href="../services/logger.html">Logger</a>
        </li>
        <li>
            <a href="../services/cache.html">Cache</a>
        </li>
        <li>
            <a href="../services/files.html">Files</a>
        </li>
    </ul>
    <h2>Cookbook</h2>
    <ul>
        <li>
            <a href="../cookbook/configuration.html">Configuration</a>
        </li>
        <li>
            <a href="../cookbook/services.html">Services</a>
        </li>
        <li>
            <a href="../cookbook/events.html">Events</a>
        </li>
        <li>
            <a href="../cookbook/request.html">Request</a>
        </li>
        <li>
            <a href="../cookbook/response.html">Response</a>
        </li>
        <li>
            <a href="../cookbook/caching.html">Caching</a>
        </li>
        <li>
            <a href="../cookbook/logging.html">Logging</a>
        </li>
        <li>
            <a href="../cookbook/debugging.html">Debugging</a>
        </li>
        <li>
            <a href="../cookbook/filesystem.html">Filesystem</a>
        </li>
        <li>
            <a href="../cookbook/console.html">Console</a>
        </li>
        <li>
            <a href="../cookbook/testing.html">Testing</a>
        </li>
    </ul>
</menu>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="services.html" title="Previous document">Application Services</a>
        </li>
        <li>
          <a href="configuration.html" title="Next document">Application Configuration</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Webino 0.1.0alpha dokumentácia</a></li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2015, Webino, s. r. o. All rights reserved.

  </footer>

  
  </body>
</html>